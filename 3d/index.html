<!DOCTYPE html>
<html>
<header>
    <title>LAB_2</title>

    <script src="lib/d3.min.js" type="text/javascript"></script>
    <script src="lib/math.js" type="text/javascript"></script>
    <script src="lib/plotly-latest.min.js" type="text/javascript"></script>
    <link href="style/style.css" rel="stylesheet">

    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <style>

    </style>
</header>

<body>

    <div class="container">
        <div class="panel">
            <div class="text main"> Grafic</div>
            <hr color="white" width="100%">
            <div class="text title"> Timeline </div>

            <input type="range" id="myRange">
            <div class="text epoch" id="epoch"> Epoch: 0</div>
            
            <hr color="white" width="100%">
            <div class="text title"> Info </div>

            <div class="text epoch" id="popul">Count populations: </div>
            <div class="text epoch" id="die">Count dead gens: </div>
            <div class="text epoch" id="new_child">New child in epoch: </div>
            <div class="text epoch" id="best_res">Best result in epoch: </div>
            <div class="text epoch" id="aver_res">Average result in epoch: </div>
            <div class="text epoch" id="mutat">Mutation: </div>

            <hr color="white" width="100%">
            <div class="text title"> Config </div>
            <div class="text epoch " style="margin-top:5px;">Count populations:</div>
            <input type="number" class="inp" id="count" min="1" value=20>
            <div class="text epoch " style="margin-top:5px;">Adjustment of algorithm end:</div>
            <span class="text info">
                Max epoch:<input type="number" style="width: 40px" id="max_epoch" value=10>
            </span>
            <div class="text epoch " style="margin-top:5px;">Mutation chance:</div>
            <input type="number" class="inp" id="mut" min="0" max="100" value=10>
            
            <hr color="white" width="100%">
           

            <div class="button">Modeling</div>
        </div>

        <div class="grafic" id="engine">
            <script src="logic/gene.js" type="text/javascript"></script>
            <script src="logic/util.js" type="text/javascript"></script>
            <script src="logic/population.js" type="text/javascript"></script>
            <script src="logic/model.js" type="text/javascript"></script>
            <script src="engine/graphics.js" type="text/javascript"></script>


            <script>
               let k = new GraphicsEngine(-20, 20, 10, 10, 20).f();
                $(document).ready(function(e){
                    $(".button").click(function(){
                        try{
                            
                            let count = Number.parseInt($("#count").val());
                            
                            let mutations_chance = Number.parseFloat($("#mut").val());
                           
                            let max_epoch = Number.parseFloat($("#max_epoch").val());
            
                         
                            new GraphicsEngine(-20, 20, mutations_chance, max_epoch, count).f();
                        }
                        catch(e){
                           
                            $(".grafic").append("<div class='err' style='color: red;font-size: 72px;  text-align: center;padding-top: 150px;'> Engine error <br> " + e + "</div>");
                            
                        }
                    })

                    $("#limit_x").change(function(){
                        $("#from_axis_y").val($("#limit_x").val());
                        $("#from_axis_x").val($("#limit_x").val());
                    });
                    $("#limit_y").change(function(){
                        $("#to_axis_y").val($("#limit_y").val());
                        $("#to_axis_x").val($("#limit_y").val());
                    });
                });


               
            </script>

        </div>
    </div>

</body>

</html>